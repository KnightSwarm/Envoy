<!doctype html>
<html>
	<head>
		<style>
			body {
				background-color: #F5F5F5;
				font-family: sans-serif;
				margin-right: 40px;
			}

			h2, h3, h4, h5, h6, h7
			{
				margin-top: 16px;
				margin-bottom: 4px;
			}

			.children { padding-left: 40px; }

			.definition
			{
				font-weight: bold;
				margin-bottom: 32px;
			}

			.example , .section
			{ 
				padding: 5px 6px;
				font-weight: bold;
				margin-top: 11px;
			}
			
			.example
			{
				font-size: 15px;
				background-color: #E6E6E6; 
			}
			
			.section
			{
				background-color: #E8E8E8; 
			}
			
			.section > .title
			{
				font-size: 16px;
			}

			.example > .children, .section > .children
			{
				padding-top: 11px;
				padding-left: 10px;
			}
			
			.section > .children
			{
				font-size: 95%;
			}
			
			.section > .children > div.text:first-child, .section > .children > dl:first-child
			{
				margin-top: 0px;
			}

			.example > .children > h7
			{
				font-size: 13px;
			}

			h7
			{
				font-size: 14px;
				font-weight: bold;
				margin-bottom: 2px;
			}

			pre
			{
				margin-top: 0px;
				padding: 6px 7px;
				background-color: #D9D9D9;
				font-weight: normal;
				font-size: 13px;
			}

			dl
			{
				margin: 5px 0px;
			}

			dt
			{
				font-weight: bold;
			}

			dd
			{
				font-size: 14px;
				font-weight: normal;
				margin-left: 8px;
			}
			
			dd > .children
			{
				font-size: 95%;
			}
			
			dd > .children > dl > dd
			{
				margin-left: 13px;
			}

			.exclamation
			{
				padding: 7px 8px;
				margin: 11px 0px;
				background-color: #FFE9AA;
				border: 1px solid yellow;
				font-size: 15px;
				font-weight: normal;
			}

			.text
			{
				font-size: 15px;
				font-weight: normal;
				margin-bottom: 14px;
				margin-top: 10px;
			}

			.toc
			{
				border: 1px solid gray;
				background-color: #E6E6E6;
				padding: 8px 9px;
				font-size: 15px;
				margin-bottom: 12px;
			}

			.toc h2
			{
				margin: 0px 0px 3px 0px;
				font-size: 19px;
			}

			.toc ul
			{
				margin-top: 0px;
				margin-bottom: 0px;
				padding-left: 25px;
			}

			.toc li
			{
				margin-bottom: 2px;
			}

			.toc .alternatives
			{
				font-size: 12px;
			}

			.toc a
			{
				color: #292722;
			}

			.toc a:hover
			{
				color: black;
			}
			
			.fixed
			{
				font-family: monospace;
				background-color: white;
				padding: 1px 4px;
				border: 1px solid silver;
				border-radius: 4px;
			}
		</style>
	</head>
	<body>
		<div class="children"><h1>UserProvider</h1><h2>Public API</h2><div class="definition"><a name="UserProvider_normalize_jidjidkeep_resourceFalse">UserProvider.normalize_jid(<em>jid</em> [, <em>keep_resource</em>=False]) <div class="children"><div class="text">Normalizes a user JID; that is, returns a string containing the specified JID, optionally leaving the resource component of the JID intact. If the	input was a string, it is returned  as is. If the input was a <span class="fixed">JID</span> object or otherwise non-string object, it will be coerced to a string.</div><dl><dt>jid</dt><dd>The JID to normalize.<div class="children"></div></dd></dl><dl><dt>keep_resource</dt><dd><em>Optional.</em> Whether to retain the resource component (after the slash), or discard it. By default, this argument is set to <span class="fixed">False</span>, which will lead to the resource being discarded, only leaving the "bare JID"; that is, <span class="fixed">user@fqdn.tld</span>. Note that this argument currently  only takes effect if the input was a <span class="fixed">JID</span> object.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A string representing the JID.</div></div></div></div></a></div><div class="definition"><a name="UserProvider_normalize_useruser">UserProvider.normalize_user(<em>user</em>) <div class="children"><div class="text">Normalizes a user; that is, returns a User object. If the input was already a User object, it is returned unchanged. If the input was a JID (either a <span class="fixed">JID</span> object, or coercible to a string), it will fetch the data for the corresponding <span class="fixed">User</span> object from the database.</div><div class="text">This function is heavily used internally, to allow provider functions to accept both User objects and JIDs. It uses <span class="fixed">UserProvider.normalize_jid</span> to ensure that JID-type input becomes a string.</div><dl><dt>user</dt><dd>The User object or JID to normalize.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A <span class="fixed">User</span> object representing the specified user.</div></div></div></div></a></div><div class="definition"><a name="UserProvider_getjid">UserProvider.get(<em>jid</em>) <div class="children"><div class="text">Retrieves a <span class="fixed">User</span> object for the specified JID. This only searches within the current FQDN.</div><dl><dt>jid</dt><dd>The JID to retrieve a <span class="fixed">User</span> object for.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A <span class="fixed">User</span> object representing the specified JID.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>NotFoundException</dt><dd>Specified user was not found, or the specified JID did not contain a <span class="fixed">node</span> component (part before the @).<div class="children"></div></dd></dl></div></div></div></a></div><div class="definition"><a name="UserProvider_find_by_emailemail">UserProvider.find_by_email(<em>email</em>) <div class="children"><div class="text">Retrieves one or more <span class="fixed">User</span> objects for the specified e-mail address. This only searches within the current FQDN.</div><dl><dt>email</dt><dd>The e-mail address to search for.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A list containing one or more <span class="fixed">User</span> objects with the specified e-mail address.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>NotFoundException</dt><dd>Raised when there are no users with the specified e-mail address.<div class="children"></div></dd></dl></div></div></div></a></div><div class="definition"><a name="UserProvider_find_by_nicknamenickname">UserProvider.find_by_nickname(<em>nickname</em>) <div class="children"><div class="text">Retrieves one or more <span class="fixed">User</span> objects for the specified nickname. This only searches within the current FQDN. Note that "nickname" here refers to the nickname that is used in mentions and configured in the user control panel, <em>not</em> the "MUC nickname" in XEP-0045.</div><dl><dt>nickname</dt><dd>The nickname to search for.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A list containing one or more <span class="fixed">User</span> objects with the specified nickname.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>NotFoundException</dt><dd>Raised when there are no users with the specified nickname.<div class="children"></div></dd></dl></div></div></div></a></div><div class="definition"><a name="UserProvider_find_by_fqdnfqdn">UserProvider.find_by_fqdn(<em>fqdn</em>) <div class="children"><div class="text">Retrieves one or more <span class="fixed">User</span> objects, one for each user in the specified FQDN.</div><dl><dt>fqdn</dt><dd>The FQDN to retrieve all users for. This may be either an <span class="fixed">Fqdn</span> object, or an FQDN (row) ID.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A list containing one or more <span class="fixed">User</span> objects, one for each user in the specified FQDN.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>NotFoundException</dt><dd>Raised when there are no users for the specified FQDN, or the specified FQDN does not exist.<div class="children"></div></dd></dl></div></div></div></a></div><div class="definition"><a name="UserProvider_find_by_idid">UserProvider.find_by_id(<em>id</em>) <div class="children"><div class="text">Retrieves a <span class="fixed">User</span> object, representing the row in the database with the specified ID. Primarily for internal use, such as referencing users by ID from other database tables.</div><dl><dt>id</dt><dd>The ID of the row to retrieve.<div class="children"></div></dd></dl><div class="exclamation"><strong>Important:</strong> If an object with the same row ID exists in the internal cache, that object will be provided instead, and    no additional database query will be executed. <div class="children"></div></div><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A <span class="fixed">User</span> object representing the row with the specified ID.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>NotFoundException</dt><dd>Raised when the specified ID does not exist in the database.<div class="children"></div></dd></dl></div></div></div></a></div><div class="definition"><a name="UserProvider_get_from_queryqueryparameters">UserProvider.get_from_query(<em>query</em>, <em>parameters</em>) <div class="children"><div class="text">Retrieves one or more <span class="fixed">User</span> objects, based on the specified database query and parameters. This is a useful way to wrap custom <span class="fixed">SELECT</span> queries, and get back <span class="fixed">User</span> objects.</div><dl><dt>query</dt><dd>The query to execute. Question-mark-style parameterization is used; queries are passed directly to the <span class="fixed">oursql</span> library.<div class="children"></div></dd></dl><dl><dt>params</dt><dd>The parameters for the query.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A list containing one or more <span class="fixed">User</span> objects, one for each row resulting from the specified query.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>NotFoundException</dt><dd>Raised when the query returned no results.<div class="children"></div></dd></dl></div></div></div></a></div><h2>Utility functions</h2><div class="definition"><a name="UserProvider_status_stringvalue">UserProvider.status_string(<em>value</em>) <div class="children"><div class="text">Returns a human-readable string, representing a numeric user status. This is used internally, to convert statuses passed on to methods, to the integers stored in the database.</div><dl><dt>value</dt><dd>The status number to convert.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A readable string representation of the status.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>KeyError</dt><dd>The specified status number is not recognized. If this happens, it is almost certainly a bug.<div class="children"></div></dd></dl></div></div></div></a></div><div class="definition"><a name="UserProvider_status_numbervalue">UserProvider.status_number(<em>value</em>) <div class="children"><div class="text">Returns a numeric value, representing a given status string. This is used internally, to convert status numbers in the database to human-readable values that are passed on to methods.</div><dl><dt>value</dt><dd>The status string to convert.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">An readable string representation of the status.</div></div></div><div class="section"><div class="title">Exceptions</div><div class="children"><dl><dt>KeyError</dt><dd>The specified status string is not recognized. If this happens, it is almost certainly a bug.<div class="children"></div></dd></dl></div></div></div></a></div><h2>Internal methods</h2><div class="definition"><a name="UserProvider_wraprow">UserProvider.wrap(<em>row</em>) <div class="children"><div class="text">Wraps a row resulting from a database query result, into a <span class="fixed">User</span> object representing it. This is used internally by all <span class="fixed">find_by</span> and <span class="fixed">get</span> methods.</div><dl><dt>row</dt><dd>A <span class="fixed">Row</span> object to be represented.<div class="children"></div></dd></dl><div class="section"><div class="title">Returns</div><div class="children"><div class="text">A <span class="fixed">User</span> object representing the provided row.</div></div></div></div></a></div></div>
	</body>
</html>
